# CodeMirror编辑器测试用例文档

## 1. 编辑器核心功能测试

### 1.1 基础编辑功能

| 测试ID | 测试名称 | 前置条件 | 测试步骤 | 预期结果 | 测试优先级 |
|--------|---------|---------|---------|----------|-----------|
| EC-001 | 语法高亮测试 | 编辑器已加载，已创建测试文件 | 1. 打开不同类型的文件（JS、TS、HTML、CSS等）<br>2. 输入相应语言的代码 | 不同语言元素（关键字、变量、字符串等）应以不同颜色高亮显示 | 高 |
| EC-002 | 行号显示测试 | 编辑器已加载，已打开文件 | 1. 观察编辑器左侧<br>2. 添加/删除多行内容 | 行号应正确显示并随着内容变化自动更新 | 中 |
| EC-003 | 代码折叠测试 | 编辑器已加载，已打开包含可折叠代码块的文件 | 1. 点击函数、循环或其他代码块前的折叠图标<br>2. 再次点击展开图标 | 代码应正确折叠和展开 | 中 |
| EC-004 | 搜索和替换测试 | 编辑器已加载，已打开包含多个相同文本的文件 | 1. 打开搜索功能（Ctrl+F）<br>2. 输入搜索文本<br>3. 使用替换功能替换单个/全部匹配项 | 应正确高亮搜索结果并准确替换指定文本 | 高 |
| EC-005 | 撤销和重做测试 | 编辑器已加载，已打开文件 | 1. 进行多次编辑操作<br>2. 使用撤销功能（Ctrl+Z）<br>3. 使用重做功能（Ctrl+Y） | 应正确撤销和重做操作，恢复对应状态 | 高 |
| EC-006 | 代码片段插入测试 | 编辑器已加载，已打开文件 | 1. 触发代码片段插入功能<br>2. 选择一个代码片段插入 | 代码片段应正确插入到光标位置 | 中 |
| EC-007 | 多光标编辑测试 | 编辑器已加载，已打开文件 | 1. 使用Ctrl+点击创建多个光标<br>2. 输入文本 | 文本应在所有光标位置同时编辑 | 中 |
| EC-008 | 自动缩进测试 | 编辑器已加载，已打开文件 | 1. 创建新代码块（如函数、循环）<br>2. 按Enter键换行 | 应自动添加适当的缩进 | 中 |
| EC-009 | 括号匹配测试 | 编辑器已加载，已打开文件 | 1. 输入或光标放置在括号处<br>2. 观察匹配括号的高亮 | 匹配的括号应高亮显示 | 中 |

### 1.2 实用编辑功能

| 测试ID | 测试名称 | 前置条件 | 测试步骤 | 预期结果 | 测试优先级 |
|--------|---------|---------|---------|----------|-----------|
| EU-001 | 基本代码自动补全测试 | 编辑器已加载，已打开文件 | 1. 开始输入变量/函数名<br>2. 观察自动补全提示 | 应显示相关的自动补全建议 | 高 |
| EU-002 | 语法错误提示测试 | 编辑器已加载，已打开文件 | 1. 在代码中故意引入语法错误<br>2. 观察错误提示 | 应显示语法错误提示（波浪线或图标） | 高 |
| EU-003 | 代码格式化测试 | 编辑器已加载，已打开格式不规范的文件 | 1. 触发代码格式化功能<br>2. 观察代码格式变化 | 代码应按规范格式化（缩进、空格等） | 中 |
| EU-004 | 代码注释切换测试 | 编辑器已加载，已打开文件 | 1. 选择代码块<br>2. 使用注释切换功能（Ctrl+/） | 选中代码应正确添加/移除注释 | 中 |

## 2. 文件管理功能测试

### 2.1 文件操作

| 测试ID | 测试名称 | 前置条件 | 测试步骤 | 预期结果 | 测试优先级 |
|--------|---------|---------|---------|----------|-----------|
| FO-001 | 新建文件测试 | 编辑器已加载 | 1. 触发新建文件功能<br>2. 输入文件名和路径<br>3. 确认创建 | 应创建新文件并在编辑器中打开 | 高 |
| FO-002 | 新建文件夹测试 | 编辑器已加载 | 1. 触发新建文件夹功能<br>2. 输入文件夹名和路径<br>3. 确认创建 | 应创建新文件夹并在文件树中显示 | 中 |
| FO-003 | 打开文件测试 | 编辑器已加载，项目中存在多个文件 | 1. 通过文件树或打开文件功能选择文件<br>2. 确认打开 | 选中文件应在编辑器中打开 | 高 |
| FO-004 | 保存文件测试 | 编辑器已加载，已打开并修改文件 | 1. 触发保存功能（Ctrl+S）<br>2. 确认保存 | 文件应成功保存，保存状态应更新 | 高 |
| FO-005 | 重命名文件测试 | 编辑器已加载，项目中存在文件 | 1. 选择文件<br>2. 触发重命名功能<br>3. 输入新名称<br>4. 确认重命名 | 文件应成功重命名，相关引用应正确更新 | 中 |
| FO-006 | 删除文件测试 | 编辑器已加载，项目中存在文件 | 1. 选择文件<br>2. 触发删除功能<br>3. 确认删除 | 文件应成功删除，如果打开则应关闭相应标签 | 中 |
| FO-007 | 导入项目测试 | 编辑器已加载 | 1. 触发导入项目功能<br>2. 选择要导入的项目文件/文件夹<br>3. 确认导入 | 项目应成功导入，文件树应更新 | 中 |
| FO-008 | 导出项目测试 | 编辑器已加载，项目中存在文件 | 1. 触发导出项目功能<br>2. 选择导出位置<br>3. 确认导出 | 项目应成功导出到指定位置 | 中 |

### 2.2 文件切换

| 测试ID | 测试名称 | 前置条件 | 测试步骤 | 预期结果 | 测试优先级 |
|--------|---------|---------|---------|----------|-----------|
| FS-001 | 标签式文件切换测试 | 编辑器已加载，已打开多个文件 | 1. 点击不同的文件标签<br>2. 观察编辑区域内容变化 | 应正确切换到相应文件内容 | 高 |
| FS-002 | 最近文件列表测试 | 编辑器已加载，已打开过多个文件 | 1. 打开最近文件列表<br>2. 选择一个最近打开的文件 | 应显示最近文件列表并正确打开选中文件 | 中 |
| FS-003 | 文件搜索功能测试 | 编辑器已加载，项目中存在多个文件 | 1. 触发文件搜索功能<br>2. 输入文件名部分内容<br>3. 从结果中选择文件 | 应显示匹配的文件列表并正确打开选中文件 | 中 |

## 3. 主题和定制功能测试

### 3.1 主题选择

| 测试ID | 测试名称 | 前置条件 | 测试步骤 | 预期结果 | 测试优先级 |
|--------|---------|---------|---------|----------|-----------|
| TH-001 | 明亮/暗黑主题切换测试 | 编辑器已加载 | 1. 打开主题设置<br>2. 切换到暗黑/明亮主题 | 应正确切换主题，所有UI元素应适应选中主题 | 中 |
| TH-002 | 语法高亮主题切换测试 | 编辑器已加载，已打开文件 | 1. 打开主题设置<br>2. 切换不同的语法高亮主题 | 代码高亮应正确应用选中的主题样式 | 中 |
| TH-003 | 自定义主题配置测试 | 编辑器已加载 | 1. 打开主题自定义设置<br>2. 调整颜色和样式选项<br>3. 应用自定义主题 | 应正确应用自定义主题设置 | 低 |

### 3.2 界面定制

| 测试ID | 测试名称 | 前置条件 | 测试步骤 | 预期结果 | 测试优先级 |
|--------|---------|---------|---------|----------|-----------|
| UI-001 | 布局调整测试 | 编辑器已加载 | 1. 拖动或调整各个面板的大小<br>2. 尝试隐藏/显示某些面板 | 布局应正确调整，所有面板应正常工作 | 中 |
| UI-002 | 字体和字号设置测试 | 编辑器已加载，已打开文件 | 1. 打开字体设置<br>2. 更改字体和字号<br>3. 应用设置 | 编辑器字体和字号应正确更新 | 中 |
| UI-003 | 缩进设置测试 | 编辑器已加载，已打开文件 | 1. 打开缩进设置<br>2. 切换空格/制表符缩进<br>3. 调整缩进大小 | 缩进方式和大小应正确应用 | 中 |
| UI-004 | 行高调整测试 | 编辑器已加载，已打开文件 | 1. 打开行高设置<br>2. 调整行高值<br>3. 应用设置 | 编辑器行高应正确更新 | 低 |
| UI-005 | 显示/隐藏元素测试 | 编辑器已加载 | 1. 打开显示设置<br>2. 切换显示/隐藏不同UI元素（行号、折叠图标等）<br>3. 应用设置 | 相应UI元素应正确显示/隐藏 | 低 |

## 4. WebContainer集成功能测试

### 4.1 文件同步

| 测试ID | 测试名称 | 前置条件 | 测试步骤 | 预期结果 | 测试优先级 |
|--------|---------|---------|---------|----------|-----------|
| WS-001 | 单文件同步测试 | 编辑器已加载，WebContainer已连接，已打开并修改文件 | 1. 触发单文件同步功能<br>2. 观察同步状态和WebContainer内容 | 文件应成功同步到WebContainer，同步状态应更新 | 高 |
| WS-002 | 全部文件同步测试 | 编辑器已加载，WebContainer已连接，已修改多个文件 | 1. 触发全部文件同步功能<br>2. 观察同步状态和WebContainer内容 | 所有文件应成功同步到WebContainer，同步状态应更新 | 高 |
| WS-003 | WebContainer文件变更接收测试 | 编辑器已加载，WebContainer已连接 | 1. 在WebContainer中修改文件<br>2. 观察编辑器中的文件内容 | 编辑器应接收WebContainer的变更通知并更新文件内容 | 高 |
| WS-004 | 自动同步配置测试 | 编辑器已加载，WebContainer已连接 | 1. 启用自动同步选项<br>2. 修改文件<br>3. 观察是否自动同步到WebContainer | 修改后应自动同步到WebContainer | 中 |

### 4.2 通信接口

| 测试ID | 测试名称 | 前置条件 | 测试步骤 | 预期结果 | 测试优先级 |
|--------|---------|---------|---------|----------|-----------|
| WC-001 | 命令发送测试 | 编辑器已加载，WebContainer已连接 | 1. 发送命令到WebContainer（如npm安装、构建等）<br>2. 观察执行状态和结果 | 命令应成功发送到WebContainer并执行，结果应返回到编辑器 | 高 |
| WC-002 | 执行结果接收测试 | 编辑器已加载，WebContainer已连接 | 1. 发送命令到WebContainer<br>2. 观察执行结果显示 | 执行结果应正确显示在编辑器界面中 | 高 |
| WC-003 | 状态监控和通知测试 | 编辑器已加载，WebContainer已连接 | 1. 执行可能导致状态变化的操作<br>2. 观察状态监控和通知显示 | 应显示WebContainer状态变化的通知 | 中 |


## 5. Hook功能测试

### 5.1 编辑器Hook测试

| 测试ID | 测试名称 | 前置条件 | 测试步骤 | 预期结果 | 测试优先级 |
|--------|---------|---------|---------|----------|-----------|
| HE-001 | useEditor基础功能测试 | 已集成useEditor Hook | 1. 创建编辑器实例<br>2. 使用各种编辑器操作方法（getContent、setContent等） | 所有方法应正确执行相应功能 | 高 |
| HE-002 | useEditorTheme功能测试 | 已集成useEditorTheme Hook | 1. 获取当前主题<br>2. 切换不同主题<br>3. 测试主题自定义功能 | 主题应正确切换和自定义 | 中 |

### 5.2 文件管理Hook测试

| 测试ID | 测试名称 | 前置条件 | 测试步骤 | 预期结果 | 测试优先级 |
|--------|---------|---------|---------|----------|-----------|
| HF-001 | useFileSystem功能测试 | 已集成useFileSystem Hook | 1. 获取文件列表<br>2. 使用文件操作方法（createFile、openFile等） | 所有方法应正确执行相应文件操作 | 高 |
| HF-002 | useFileTabs功能测试 | 已集成useFileTabs Hook | 1. 打开多个标签<br>2. 切换标签<br>3. 关闭标签<br>4. 重新排序标签 | 标签操作应正确执行 | 中 |

### 5.3 WebContainer通信Hook测试

| 测试ID | 测试名称 | 前置条件 | 测试步骤 | 预期结果 | 测试优先级 |
|--------|---------|---------|---------|----------|-----------|
| HW-001 | useWebContainerBridge功能测试 | 已集成useWebContainerBridge Hook | 1. 建立连接<br>2. 同步文件<br>3. 执行命令<br>4. 获取状态信息 | 所有方法应正确执行相应功能 | 高 |
| HW-002 | useFileSynchronization功能测试 | 已集成useFileSynchronization Hook | 1. 设置同步模式<br>2. 同步文件<br>3. 解决冲突 | 同步相关功能应正确执行 | 高 |

## 6. 集成测试

| 测试ID | 测试名称 | 前置条件 | 测试步骤 | 预期结果 | 测试优先级 |
|--------|---------|---------|---------|----------|-----------|
| IT-001 | 编辑-同步-运行流程测试 | 编辑器已加载，WebContainer已连接 | 1. 创建/修改文件<br>2. 同步到WebContainer<br>3. 在WebContainer中运行代码 | 整个流程应顺利完成，代码应在WebContainer中正确运行 | 高 |
| IT-002 | 多文件协同编辑测试 | 编辑器已加载，已打开多个相互引用的文件 | 1. 修改一个文件中的导出名称<br>2. 观察其他引用该导出的文件是否有提示<br>3. 使用重构功能自动更新引用 | 应识别引用关系并提供更新建议 | 中 |
| IT-003 | 大型项目性能测试 | 编辑器已加载，已导入大型项目（多文件） | 1. 打开多个文件<br>2. 进行编辑操作<br>3. 同步到WebContainer<br>4. 监控性能指标 | 编辑器应保持响应迅速，不应出现明显卡顿 | 高 |

## 7. 兼容性测试

| 测试ID | 测试名称 | 前置条件 | 测试步骤 | 预期结果 | 测试优先级 |
|--------|---------|---------|---------|----------|-----------|
| CT-001 | 浏览器兼容性测试 | 编辑器部署到测试环境 | 1. 在不同浏览器中打开编辑器（Chrome、Firefox、Safari、Edge）<br>2. 执行基本操作（编辑、保存、同步等） | 在所有主流浏览器中应正常工作 | 高 |
| CT-002 | 设备兼容性测试 | 编辑器部署到测试环境 | 1. 在不同设备上打开编辑器（桌面端、平板）<br>2. 执行基本操作 | 应适应不同屏幕尺寸并保持功能可用 | 中 |
| CT-003 | 文件格式兼容性测试 | 编辑器已加载 | 1. 导入/打开不同格式的文件（JS、TS、JSX、TSX、HTML、CSS、JSON等）<br>2. 编辑和保存文件 | 应正确处理所有支持的文件格式 | 高 |

## 8. 异常和边界情况测试

| 测试ID | 测试名称 | 前置条件 | 测试步骤 | 预期结果 | 测试优先级 |
|--------|---------|---------|---------|----------|-----------|
| EB-001 | 断网情况测试 | 编辑器已加载，WebContainer已连接 | 1. 断开网络连接<br>2. 尝试同步操作<br>3. 恢复网络连接<br>4. 重新尝试同步 | 应显示适当的错误提示，网络恢复后应可重新连接 | 高 |
| EB-002 | 大文件处理测试 | 编辑器已加载 | 1. 打开或创建非常大的文件（>1MB）<br>2. 进行编辑操作<br>3. 保存文件 | 应正常处理大文件，不应崩溃或卡顿严重 | 中 |
| EB-003 | WebContainer异常测试 | 编辑器已加载，WebContainer已连接 | 1. 模拟WebContainer崩溃或错误情况<br>2. 观察编辑器响应<br>3. 尝试重新连接 | 应显示适当的错误提示并提供重连选项 | 高 |
| EB-004 | 并发操作测试 | 编辑器已加载，WebContainer已连接 | 1. 同时执行多个操作（编辑多个文件、保存、同步等）<br>2. 观察系统响应 | 应正确处理并发操作，不应出现数据丢失或崩溃 | 中 |

## 9. 性能测试

| 测试ID | 测试名称 | 前置条件 | 测试步骤 | 预期结果 | 测试优先级 |
|--------|---------|---------|---------|----------|-----------|
| PT-001 | 启动时间测试 | 编辑器未加载 | 1. 启动编辑器<br>2. 记录从点击到可用的时间 | 启动时间应在可接受范围内（<3秒） | 中 |
| PT-002 | 编辑响应性测试 | 编辑器已加载，已打开大文件 | 1. 快速输入文本<br>2. 执行多种编辑操作<br>3. 测量操作延迟 | 编辑操作应无明显延迟 | 高 |
| PT-003 | 内存使用测试 | 编辑器已加载 | 1. 打开多个大文件<br>2. 长时间使用编辑器<br>3. 监控内存使用 | 内存使用应稳定，不应出现明显泄漏 | 中 |
| PT-004 | 文件同步性能测试 | 编辑器已加载，WebContainer已连接 | 1. 同步大量文件或大型文件<br>2. 记录同步时间<br>3. 监控系统资源使用 | 同步应在合理时间内完成，不影响整体性能 | 中 |

## 10. 用户体验测试

| 测试ID | 测试名称 | 前置条件 | 测试步骤 | 预期结果 | 测试优先级 |
|--------|---------|---------|---------|----------|-----------|
| UX-001 | 界面直观性测试 | 编辑器已加载 | 1. 用户尝试不借助说明完成基本任务<br>2. 记录用户操作路径和困惑点 | 用户应能直观地找到功能入口，完成基本任务 | 高 |
| UX-002 | 操作流畅性测试 | 编辑器已加载 | 1. 执行常见任务流程（创建->编辑->保存->运行）<br>2. 记录任何中断或不自然的步骤 | 操作流程应流畅自然，无不必要的中断 | 高 |
| UX-003 | 错误提示友好性测试 | 编辑器已加载 | 1. 故意执行会产生错误的操作<br>2. 评估错误提示的清晰度和帮助性 | 错误提示应清晰、具体，并提供解决建议 | 中 |
| UX-004 | 键盘快捷键测试 | 编辑器已加载 | 1. 使用各种键盘快捷键执行操作<br>2. 验证快捷键功能和一致性 | 快捷键应正确执行相应功能，符合常规习惯 | 中 |
